(function(){"use strict";var h=(e=>(e[e.PROGRESS=0]="PROGRESS",e[e.DONE=1]="DONE",e[e.ERROR=2]="ERROR",e))(h||{});let i;const A=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&A.decode();let _=null;function m(){return(_===null||_.byteLength===0)&&(_=new Uint8Array(i.memory.buffer)),_}function S(e,n){return e=e>>>0,A.decode(m().subarray(e,e+n))}const a=new Array(128).fill(void 0);a.push(void 0,null,!0,!1);function s(e){return a[e]}let g=0;const R=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},D=typeof R.encodeInto=="function"?function(e,n){return R.encodeInto(e,n)}:function(e,n){const t=R.encode(e);return n.set(t),{read:e.length,written:t.length}};function E(e,n,t){if(t===void 0){const f=R.encode(e),u=n(f.length,1)>>>0;return m().subarray(u,u+f.length).set(f),g=f.length,u}let r=e.length,o=n(r,1)>>>0;const l=m();let c=0;for(;c<r;c++){const f=e.charCodeAt(c);if(f>127)break;l[o+c]=f}if(c!==r){c!==0&&(e=e.slice(c)),o=t(o,r,r=c+e.length*3,1)>>>0;const f=m().subarray(o+c,o+r),u=D(e,f);c+=u.written,o=t(o,r,c,1)>>>0}return g=c,o}function I(e){return e==null}let d=null;function y(){return(d===null||d.buffer.detached===!0||d.buffer.detached===void 0&&d.buffer!==i.memory.buffer)&&(d=new DataView(i.memory.buffer)),d}let p=a.length;function x(e){e<132||(a[e]=p,p=e)}function O(e){const n=s(e);return x(e),n}function b(e){p===a.length&&a.push(a.length+1);const n=p;return p=a[n],a[n]=e,n}function T(e,n){try{return e.apply(this,n)}catch(t){i.__wbindgen_exn_store(b(t))}}let w=128;function v(e){if(w==1)throw new Error("out of js stack");return a[--w]=e,w}function U(e,n,t,r,o){try{const u=i.__wbindgen_add_to_stack_pointer(-16),k=E(n,i.__wbindgen_malloc,i.__wbindgen_realloc),C=g,F=E(t,i.__wbindgen_malloc,i.__wbindgen_realloc),P=g;i.convertImage(u,v(e),k,C,F,P,v(r),v(o));var l=y().getInt32(u+4*0,!0),c=y().getInt32(u+4*1,!0),f=y().getInt32(u+4*2,!0);if(f)throw O(c);return O(l)}finally{i.__wbindgen_add_to_stack_pointer(16),a[w++]=void 0,a[w++]=void 0,a[w++]=void 0}}async function L(e,n){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,n)}catch(r){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const t=await e.arrayBuffer();return await WebAssembly.instantiate(t,n)}else{const t=await WebAssembly.instantiate(e,n);return t instanceof WebAssembly.Instance?{instance:t,module:e}:t}}function M(){const e={};return e.wbg={},e.wbg.__wbg_call_c6fe275aaa60da79=function(){return T(function(n,t,r,o){const l=s(n).call(s(t),s(r),s(o));return b(l)},arguments)},e.wbg.__wbindgen_throw=function(n,t){throw new Error(S(n,t))},e.wbg.__wbindgen_is_undefined=function(n){return s(n)===void 0},e.wbg.__wbg_stringify_bbf45426c92a6bf5=function(){return T(function(n){const t=JSON.stringify(s(n));return b(t)},arguments)},e.wbg.__wbindgen_string_get=function(n,t){const r=s(t),o=typeof r=="string"?r:void 0;var l=I(o)?0:E(o,i.__wbindgen_malloc,i.__wbindgen_realloc),c=g;y().setInt32(n+4*1,c,!0),y().setInt32(n+4*0,l,!0)},e.wbg.__wbindgen_object_drop_ref=function(n){O(n)},e.wbg.__wbindgen_number_new=function(n){return b(n)},e.wbg.__wbindgen_string_new=function(n,t){const r=S(n,t);return b(r)},e.wbg.__wbg_length_8339fcf5d8ecd12e=function(n){return s(n).length},e.wbg.__wbindgen_memory=function(){const n=i.memory;return b(n)},e.wbg.__wbg_buffer_b7b08af79b0b0974=function(n){const t=s(n).buffer;return b(t)},e.wbg.__wbg_new_ea1883e1e5e86686=function(n){const t=new Uint8Array(s(n));return b(t)},e.wbg.__wbg_set_d1e79e2388520f18=function(n,t,r){s(n).set(s(t),r>>>0)},e.wbg.__wbg_newwithbyteoffsetandlength_8a2cb9ca96b27ec9=function(n,t,r){const o=new Uint8Array(s(n),t>>>0,r>>>0);return b(o)},e}function N(e,n){return i=e.exports,j.__wbindgen_wasm_module=n,d=null,_=null,i}async function j(e){if(i!==void 0)return i;typeof e<"u"&&Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead"),typeof e>"u"&&(e=new URL(""+new URL("wasm_convert_bg-CdAvwlRt.wasm",self.location.href).href,self.location.href));const n=M();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:t,module:r}=await L(await e,n);return N(t,r)}globalThis.addEventListener("message",async e=>{await j();try{const t={success:!0,data:U(e.data.inputFile,e.data.inputType,e.data.outputType,W,e.data.settings)};globalThis.postMessage({type:h.DONE,payload:t})}catch(n){const t={success:!1,error:String(n)};globalThis.postMessage({type:h.ERROR,payload:t})}},!1);function W(e,n){globalThis.postMessage({type:h.PROGRESS,payload:{progress:e,message:n}})}})();
